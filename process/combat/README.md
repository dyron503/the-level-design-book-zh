---
description: 设计玩家之间或玩家与NPC的实体冲突
---

# 🔫 战斗设计

## 什么是战斗设计？

战斗设计是为设计冲突相关的系统。既包括玩家之间，也包括玩家与 AI 驱动敌人的冲突。

在关卡设计中，通常假定战斗设计发生在第一人称射击游戏或其他实时 3D 动作游戏内。

请注意，玩家与玩家之间的竞技战斗（PvP）与单人/合作玩家与敌人之间的战斗（PvE）在功能上有很大不同。 PvP 通常意味着所有战斗者都有公平获胜机会； 相比之下，PvE 则提供延迟但有保证的胜利。两类游戏对玩家作出的承诺堪称天壤之别，因此关卡设计也不尽相同。

_如果你不打算在游戏内设计战斗，可以跳过此节直接开始学习_[_绘制关卡草图_](../layout/)_。_

<figure><img src="../../.gitbook/assets/image (4).png" alt=""><figcaption><p>《毁灭战士》（Doom）（1993）截图。《毁灭战士》是早期 FPS 的代表，许多战斗设计模式仍在影响今天的射击游戏</p></figcaption></figure>

## 战斗系统

制作战斗系统时有两种选择：

* 为包含战斗要素的现有游戏制作模组；
* 从头开始制作自己的战斗 Gameplay。

良好的战斗系统为优质关卡奠定基础，但这样的核心战斗工具包需要大量的代码、美术、动画、音频资产，以及经过反复调整后才能开发出来。

这个话题很复杂，已经超出一本关卡设计书籍所能涉及。「做好战斗体验」 这个话题和 「做出好游戏」 一样是个大话题。

因此我们强烈推荐制作模组。制作模组时，你重用经验证的现有战斗系统而无需从头开始自己做一个。

_推荐制作模组和研究的的包含战斗要素游戏见_[_工具_](../../appendix/tools.md)

<figure><img src="../../.gitbook/assets/image (1) (1) (1) (1) (1).png" alt=""><figcaption><p>Mike Stout 的演讲 《走进玩具箱： 探究 Skylanders Spyro's Adventure 的设计》（<a href="https://www.gdcvault.com/play/1015838/Reaching-Into-the-Toy-Chest">"Reaching Into Toy-Chest：A Look into Skylanders Spyro's Adventure's Design "</a>）幻灯片，来自 GDC 2012</p></figcaption></figure>

即便只是修改已有的含战斗游戏，你也须能够从理论上解释它如何运作。含战斗游戏无论单人或多人，都以某种方式具备下面这些要素：

* 战斗机制
* 武器设计
* 经济系统

在大型商业工作室中岗位很细，关卡策划之职并不囊括这些核心战斗要素。但是，身为关卡策划不了解这些要素的话，也很难制作关卡。

<figure><img src="../../.gitbook/assets/image (3) (1).png" alt=""><figcaption><p>图片来自迈克尔-巴克利（Michael Barclay）等人的<a href="https://www.gdcvault.com/play/1023791/Creating-Conflict-Combat-Design-for"> "创造冲突：3A 级动作游戏的战斗设计"（Creating Conflict: Combat Design for AAA Action Games），</a>来自 GDC 2016</p></figcaption></figure>

### 战斗机制

战斗机制是指玩家在与敌人战斗时反复使用的动作/技能/武器。 一些常见的战斗机制：&#x20;

* **移动**以摆脱危险，控制地盘；
* **瞄准**特定的敌人类型/薄弱点；
* **据时机**攻击以获得**tell / telegraph** (opportunity)
* 组合动作或武器，将攻击串成**连招**
* **阻止**敌人攻击；适时**招架/反击/闪避**&#x20;
* 使用爆炸桶、水、熔岩、悬崖等**陷阱**

{% embed url="https://book.leveldesignbook.com/~gitbook/image?url=https%3A%2F%2F1666186240-files.gitbook.io%2F%7E%2Ffiles%2Fv0%2Fb%2Fgitbook-legacy-files%2Fo%2Fassets%252F-LtVT8pJjInrrHVCovzy%252F-MCcQT9RgVLd-yLRamEE%252F-MCcQmBwTl4MKjF33SYl%252FGodOfWar2014_CombatPrototype.gif%3Falt%3Dmedia%26token%3De4c053d2-c9b7-4bbb-92e7-ec21bee8bc54&width=400&dpr=3&quality=100&sign=1ea02b63&sv=2" %}
索尼圣莫妮卡工作室 2014 年为 《战神》（2018）制作的早期测试地图 + 战斗原型 GIF 动画
{% endembed %}

### 武器设计

许多游戏都为玩家提供多种可使用的武器。**武器设计**就是对这些武器进行构思、实现和平衡。 需要考虑以下几个方面：

* **武器感受、幻想程度**（如慢吞吞大枪 vs. 鬼祟祟小刀 vs. 响当当电锯）
* 伤害、范围、开火速度、弹量等**数据**
* **强度区间**，玩家在不同时候选择最适合/有效的武器

<figure><img src="../../.gitbook/assets/image (1) (1) (1) (1).png" alt=""><figcaption><p>《毁灭战士》（1993）中的武器启发了之后许多射击游戏：(1) 电锯，(2) 手枪，(3) 霰弹枪，(4) 超级霰弹枪，(5) 橡皮枪，(6) 火箭发射器，(7) 等离子枪，(8) BFG</p></figcaption></figure>

### 经济系统

经济是一个游戏设计通用术语，指玩家在整个游戏过程中必须考虑的成本/收益/回报的整体系统。 玩家对资源的获取会影响到他们使用哪些机制和武器以及何时使用：

* **武器经济学：**&#x5F39;量、时间（DPS）、武器库 / 装备
  * _例如：玩家只剩 1 枚火箭弹，则会把火箭弹留到对火箭弹有弱点的强敌交战时使用_
  * _例如：玩家在水下只有 15 秒的氧气时间，因此需要高 DPS 武器来对付水下敌人_
* **玩家状态：**&#x751F;命值、库存和消耗品这类短期数据
  * 例如：玩家有99%生命值，则一般不会选择将浪费24%的回复25%物品
* **玩家成长：**&#x7ECF;验值、被动技、升级、装备等长线收益
  * 例如：玩家的生命值为 99%，但有一条被动技能——如果生命值满了，就能获得双倍伤害——就大概率会决定还是选择 +25% 生命值的物品，因为伤害奖励比浪费的治疗值更有价值

<figure><img src="../../.gitbook/assets/image (2) (1) (1) (1).png" alt=""><figcaption><p>用于动作 RPG 游戏《战神：毁灭之战》（God of War: Ragnarok）（2022）的武器升级电子表格，摘自罗伯-迈耶（Rob Meyer）的演讲 "命运的抉择：毁灭之战的战斗规模"（<a href="https://youtu.be/6iTBqcBv5QA?t=1311">"Reckoning With Fate: Combat At The Scale of Ragnarok" </a>）（2023 年）（来自 YouTube）。</p></figcaption></figure>

> 「我们在纸上建模，得出获得齿轮和进化的合适期望；之后在不断测试和迭代中让游玩情况和期望模型匹配。
>
> _\[这是一个带有计划的能力-进度电子表格（如上图），在游戏中的不同点上有不同的齿轮插槽。每行是游戏时间顺序的不同关卡。每一列都是不同的装备，代表着我们希望玩家在游戏中将装备升级到的水平。我们一直在交叉比对我们认为应该发生的事情与游戏测试中实际发生的..._
>
> _我们使用的一个技巧是 \[让升级现有装备比购买新装备更昂贵]，这样你就有了寻找新装备的临时动力 \[...]类似地，当我们知道玩家不具备从 4 级升级到 5 的资源时，就可以在探索中奖励 5 级盔甲，确保奖励对玩家构成吸引。_
>
> \-- Rob Meyer，[“Reckoning with Gate： Combat at the Scale of Ragnarok” （2023） （YouTube）](https://www.youtube.com/watch?v=6iTBqcBv5QA\&t=1311s)

## 战斗示例

下面总结三种主要战斗方法：

* **经典战斗**（毁灭战士、雷神之锤）侧重于**移动**
  * 类魂（黑暗之魂、血源、艾尔登法环）要求玩家躲避
  * 战斗通常在近距离持续进行
* **军事写实战斗**（反恐精英、使命召唤）中玩家**瞄准**
  * **战术竞技**（堡垒之夜、绝地求生、Apex 英雄）加入更多**经济**
  * 战斗在长距离上随机展开
* **现代战斗**（光环、军团要塞2、守望先锋）强化**伤害**
  * **掩体射击游戏**（战争机器、秘境探险）添加**占据身位**要素
  * 玩家与敌人在中等距离有节奏地交火

注意：没有游戏能全然归入某一类。括号里的内容仅作示例，或可视作看待所列出游戏之特定方式。

<figure><img src="../../.gitbook/assets/image (40).png" alt=""><figcaption><p>American McGee 和 Sandy Petersen 在 毁灭战士 2（Doom 2） 中的标志性关卡“Dead Simple”截图。</p></figcaption></figure>

### 经典战斗

毁灭战士（1993）的内置瞄准辅助颇为强力；玩家甚至无法垂直向上或向下看。它显然不是以瞄准为核心的游戏。与高速移动结合，二者催生了具大量敌人、多变遭遇战和大面积延申场景的关卡。

> _「\[玩家] 以每小时 50 英里的速度奔跑——以现代标准来看太快了。毁灭战士的大多数敌人都不以即时命中弹丸攻击，而且大多数都非常弱——低级士兵和中士。所有其他敌人的弹丸都需要时间才能击中目标，在逼真的视觉表现中显得很滑稽。_
>
> _毁灭战士的玩家机动极快，而且大多数攻击都能躲开；所以玩家只需要移动就可以避开大量伤害。\[...]这让毁灭战士的遭遇战腾出空间来展示大量敌人，通过混合不同比例的威胁来改变场景，并拥有可以轻松穿越的巨大、蔓延、通常是非线性的空间。_
>
> _--JP LeBreton, 腔棘鱼：_&#x4ECE;《毁灭战士》 获得的经验教训 _（_[_Coelacanth: Lessons from Doom_](http://vectorpoem.com/news/?p=74)_）_

类 《黑暗之魂》 的动作角色扮演游戏通过 「闪避翻滚」 和 「无敌帧」（I 帧）正式确立了躲避机制，玩家可在良好的时机规避所有伤害。学习观察敌人的动作，并重新跑位/躲避以避开攻击，通常比使用最好的武器或拥有最好的装备更重要。

<figure><img src="../../.gitbook/assets/image (41).png" alt=""><figcaption><p>雷神之锤（1996） 的屏幕截图，1996 年原始画面</p></figcaption></figure>

### 军事写实战斗

原版 《反恐精英》（1999）具写实军事风格，它普及了多人团队竞技游戏。游戏中武器致命，几秒便可分胜负。成功取决于快速反应、在正确时间瞄准正确位置、清理射击角度和枪线——并用闪光弹和烟雾阻断视线。多样的枪支精度、后坐力和子弹穿透机制进一步强化了核心机制：观察和瞄准。

近年来流行的战术竞技游戏类型最初起源于写实军事模拟射击游戏 《武装突袭》（ARMA）系列的模组，其许多设计理念延续到首款商业上取得巨大成功的战术竞技射击游戏 《绝地求生》 中。即使是在 《堡垒之夜》 或《Apex英雄》 这类军事色彩较弱的战术竞技游戏中，新玩家常会冷不防地被百米外看不见的狙击手击毙。然而，一切都取决于玩家收集物资和枪支的能力，这为每局游戏增添了库存管理的元素以及类似角色扮演游戏的成长机制。

<figure><img src="../../.gitbook/assets/image (42).png" alt=""><figcaption><p>戴夫·约翰斯顿（Dave Johnston）为 《反恐精英1.6》 的标志性多人地图：炙热沙城II所截图</p></figcaption></figure>

### 现代战斗

在《光环： 战斗进化》（2001年）中，玩家移动迟缓，跳跃很飘，难以躲避攻击。而且也无需太多瞄准：默认手枪是游戏里公认的神级武器之一，凭借微妙的自动瞄准效果，玩家能轻松在中距离或远距离完成爆头；这把枪十分适合休闲主机玩家。《光环》 注重的不是移动和瞄准，而是伤害管理：

> _「在几乎所有现代第一人称射击游戏中，玩家移动迟缓，绝大多数敌人都配备手枪、机关枪、狙击步枪这类能瞬间命中的武器。 这通常让玩家扮演 「伤害吸收体」——承受大量难以躲避的敌方攻击，随后寻找掩体恢复状态。《光环》 中的可充能护盾让玩家更明确该核心机制—— 正常情况下，玩家会持续掉血甚至死亡；只要找到掩体就能稳住局面， 从而完成战斗的基本循环。_
>
> \--JP LeBreton, 腔棘鱼：从《毁灭战士》 获得的经验教训 （[Coelacanth: Lessons from Doom](http://vectorpoem.com/news/?p=74)）

《军团要塞 2》 等多人团队射击游戏极为看重治疗，每支队伍都少不了治疗者。《守望先锋》 以 《光环》 的护盾再生机制为蓝本进一步优化。《战争机器》 《秘境探险》 等掩体射击游戏具备生命值自动恢复设定，并与寻找掩体挂钩。玩家参与现代战斗就是在挨揍、躲避和回血间循环。

<figure><img src="../../.gitbook/assets/image (43).png" alt=""><figcaption><p>人气多人地图 「血腥溪谷」 的游戏截图，该地图来自 Bungie 出品的《光环： 战斗进化》</p></figcaption></figure>

## 待完善：战斗设计方法

* 在白盒中搭建测试地图
  * 开放区域和三通道
* 加入敌人
* 反复进行游戏测试
* 「战斗设计是否合格」 的评价标准

## 战斗关卡核心要点

无论你是基于现有游戏进行改造，还是从零开始打造战斗系统，只要确立了核心玩法，就可以着手设计具体战斗场景：

* 进行[敌人设计](enemy_design.md)，制作敌方NPC并划分不同类型：
  * 理想状况下，各类敌人各有其行为模式、优势和弱点；
  * 若敌人种类单薄，战斗则千篇一律。
* 设计与NPC的[遭遇战](encounter.md)：
  * 设定开放式战斗谜题，让玩家临场应变；
  * 通常需[编写脚本](../scripting/)实现。
* [设计掩体](cover.md)，规划战斗空间：
  * 明确安全区与危险地带，以及玩家战斗及回复的位置；
  * 掩体随机制或武器而变。你首先得有核心战斗设计。
* [地图平衡](map_balance.md)体现玩家选择的公平性，通常在 PvP（玩家间对战）模式里很重要。
  * 玩家能前往何处、可控制哪些区域？玩家又如何知晓这些信息？
  * 平衡的关卡让玩家信赖[关卡草图](../layout/)布局，并投入到战斗胜负之中。

我们建议按上述顺序展开战斗设计。每个环节都取决于前一环节。设计战斗遭遇，得先设计敌人；协调掩体运用，得先构想战斗走向；平衡地图前，则需先弄清合理的掩体布局模式 。

<figure><img src="../../.gitbook/assets/image (44).png" alt=""><figcaption><p>2001 年的 《光环》 中一些敌方角色。这款早期主机第一人称射击游戏推广了动态小队战斗和载具玩法。</p></figcaption></figure>

## 总结一下……

* 战斗设计流程打造引发实体冲突的系统。
* 要制作战斗关卡，先得有一款战斗游戏。制作完整游戏颇难；况本书专于关卡设计，不节外生枝。为现有游戏制作模组来得更便宜。
* 常见战斗系统包括：
  * 瞄准、闪避、把握时机等战斗机制；
  * 武器设计，即为玩家打造多样且有趣的工具；
  * 经济系统，涵武器、库存、升级之成本与收益机制。
* 试举些战斗类型：
  * 经典战斗游戏和类 《黑暗之魂》 游戏注重速度和躲避攻击；
  * 军事写实游戏和战术竞技游戏中，瞄准和射击更关键；
  * 现代战斗和掩体射击游戏着重于管理生命值及伤害。
* 要开发战斗游戏，（待完成）

## 下一步怎么办？

* 深入阅读战斗关卡设计中一些关键概念：
  * [敌人设计](enemy_design.md)
  * [遭遇战](encounter.md)
  * [掩体](cover.md)
  * [地图平衡](map_balance.md)
* 进入关卡草图阶段。

## 战斗设计相关拓展阅读

• [《直面命运：诸神黄昏级别的战斗》](https://www.youtube.com/watch?v=6iTBqcBv5QA)（"Reckoning With Fate: Combat At The Scale of Ragnarok" ）（2023年）（YouTube视频）是 《战神：诸神黄昏》（2022年）主战斗策划罗布·迈耶（Rob Meyer）关于现代3A 游戏战斗设计最全面的讲座。迈耶结合自身工作举例，并详述了索尼圣莫尼卡工作室战斗策划的职责。
